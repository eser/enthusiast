{"version":3,"file":"index.min.js","sources":["../src/types/customIterator.ts","../src/fromNodeStream.ts","../src/toNodeStream.ts"],"sourcesContent":["class CustomIterator<T> implements IterableIterator<T | null> {\n    nextPointer: () => T | null;\n\n    constructor(nextPointer: () => T | null) {\n        this.nextPointer = nextPointer;\n    }\n\n    next(): IteratorResult<T | null> {\n        const result = this.nextPointer();\n\n        if (result !== null) {\n            return { done: false, value: result };\n        }\n\n        return { done: true, value: null };\n    }\n\n    [Symbol.iterator](): IterableIterator<T | null> {\n        return this;\n    }\n}\n\nexport {\n    CustomIterator as default,\n};\n","import { Readable } from 'stream';\n\nimport CustomIterator from './types/customIterator';\n\nfunction fromNodeStream(source: Readable, size?: number): Promise<CustomIterator<any>> {\n    return new Promise((resolve, reject) => {\n        source.on('readable', () => {\n            const nextPointer = () => {\n                const buffer = source.read(size);\n\n                if (buffer === null) {\n                    return null;\n                }\n\n                return { type: 'chunk', data: buffer };\n            };\n\n            resolve(new CustomIterator<any>(nextPointer));\n        });\n    });\n}\n\nexport {\n    CustomIterator,\n    fromNodeStream as default,\n};\n","import { Writable } from 'stream';\n\nfunction toNodeStream(target: Writable): (value: any) => Promise<any> {\n    return (value: any): Promise<any> => {\n        return new Promise((resolve, reject) => {\n            const errorCallback = (err) => reject(err);\n\n            target.on('error', errorCallback);\n            target.write(value, () => resolve(value));\n            target.removeListener('error', errorCallback);\n        });\n    };\n}\n\nexport {\n    toNodeStream as default,\n};\n"],"names":[],"mappings":";IAGI,wBAAY,WAA2B;QACnC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;KAClC;IAED,6BAAI,GAAJ;QACI,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAElC,IAAI,MAAM,KAAK,IAAI,EAAE;YACjB,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;SACzC;QAED,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;KACtC;IAED,yBAAC,MAAM,CAAC,QAAQ,CAAC,GAAjB;QACI,OAAO,IAAI,CAAC;KACf;IACL,qBAAC;CAAA,IChBD,SAAS,cAAc,CAAC,MAAgB,EAAE,IAAa;IACnD,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QAC/B,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE;YAClB,IAAM,WAAW,GAAG;gBAChB,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEjC,IAAI,MAAM,KAAK,IAAI,EAAE;oBACjB,OAAO,IAAI,CAAC;iBACf;gBAED,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;aAC1C,CAAC;YAEF,OAAO,CAAC,IAAI,cAAc,CAAM,WAAW,CAAC,CAAC,CAAC;SACjD,CAAC,CAAC;KACN,CAAC,CAAC;CACN,AClBD,SAAS,YAAY,CAAC,MAAgB;IAClC,OAAO,UAAC,KAAU;QACd,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,IAAM,aAAa,GAAG,UAAC,GAAG,IAAK,OAAA,MAAM,CAAC,GAAG,CAAC,GAAA,CAAC;YAE3C,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;YAClC,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,cAAM,OAAA,OAAO,CAAC,KAAK,CAAC,GAAA,CAAC,CAAC;YAC1C,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;SACjD,CAAC,CAAC;KACN,CAAC;CACL"}